{"ast":null,"code":"import _classCallCheck from\"/home/ingrid/Documentos/testFullStack/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ingrid/Documentos/testFullStack/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";/*eslint no-restricted-globals: 0*/import auth0 from\"auth0-js\";import jwtDecode from\"jwt-decode\";//redirectUri:\"http://localhost:3001/callback\" || \nvar LOGIN_SUCCESS_PAGE=\"/home\";var LOGIN_FAILURE_PAGE=\"/\";var Auth=/*#__PURE__*/function(){function Auth(){_classCallCheck(this,Auth);this.auth0=new auth0.WebAuth({domain:\"dev-vny--4ui.us.auth0.com\",clientID:\"HfXSTmsqkuqCz0IGgLF0Nt4PVUsl9fCt\",redirectUri:\"https://minha-carteira.netlify.app/callback\",audience:\"https://dev-vny--4ui.us.auth0.com/userinfo\",responseType:\"token id_token\",scope:\"openid profile\"});this.login=this.login.bind(this);}_createClass(Auth,[{key:\"login\",value:function login(){this.auth0.authorize();}},{key:\"handleAuthentication\",value:function handleAuthentication(){this.auth0.parseHash(function(err,authResults){if(authResults&&authResults.accessToken&&authResults.idToken){var expiresAt=JSON.stringify(authResults.expiresIn*100000+new Date().getTime());localStorage.setItem(\"access_token\",authResults.accessToken);localStorage.setItem(\"id_token\",authResults.idToken);localStorage.setItem(\"experies_at\",expiresAt);location.hash=\"\";location.pathname=LOGIN_SUCCESS_PAGE;}else if(err){location.pathname=LOGIN_FAILURE_PAGE;console.log(err);}});}},{key:\"isAuthenticated\",value:function isAuthenticated(){var expiresAt=JSON.parse(localStorage.getItem(\"experies_at\"));return new Date().getTime()<expiresAt;}},{key:\"logout\",value:function logout(){localStorage.removeItem(\"access_token\");localStorage.removeItem(\"id_token\");localStorage.removeItem(\"experies_at\");location.pathname=LOGIN_FAILURE_PAGE;}},{key:\"getProfile\",value:function getProfile(){if(localStorage.getItem(\"id_token\")){return jwtDecode(localStorage.getItem(\"id_token\"));}else{return{};}}}]);return Auth;}();export default Auth;","map":{"version":3,"sources":["/home/ingrid/Documentos/testFullStack/frontEnd/src/Auth.js"],"names":["auth0","jwtDecode","LOGIN_SUCCESS_PAGE","LOGIN_FAILURE_PAGE","Auth","WebAuth","domain","clientID","redirectUri","audience","responseType","scope","login","bind","authorize","parseHash","err","authResults","accessToken","idToken","expiresAt","JSON","stringify","expiresIn","Date","getTime","localStorage","setItem","location","hash","pathname","console","log","parse","getItem","removeItem"],"mappings":"wUAAA,mCAEA,MAAOA,CAAAA,KAAP,KAAkB,UAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CAEA;AAEA,GAAMC,CAAAA,kBAAkB,CAAG,OAA3B,CACA,GAAMC,CAAAA,kBAAkB,CAAG,GAA3B,C,GAEMC,CAAAA,I,yBAUF,eAAc,iCATdJ,KASc,CATN,GAAIA,CAAAA,KAAK,CAACK,OAAV,CAAkB,CACtBC,MAAM,CAAC,2BADe,CAEtBC,QAAQ,CAAC,kCAFa,CAGtBC,WAAW,CAAE,6CAHS,CAItBC,QAAQ,CAAC,4CAJa,CAKtBC,YAAY,CAAE,gBALQ,CAMtBC,KAAK,CAAE,gBANe,CAAlB,CASM,CACV,KAAKC,KAAL,CAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb,CACH,C,sDAEM,CACJ,KAAKb,KAAL,CAAWc,SAAX,GACF,C,mEAEsB,CACnB,KAAKd,KAAL,CAAWe,SAAX,CAAqB,SAACC,GAAD,CAAMC,WAAN,CAAsB,CACvC,GAAIA,WAAW,EAAIA,WAAW,CAACC,WAA3B,EAA0CD,WAAW,CAACE,OAA1D,CAAmE,CAC/D,GAAIC,CAAAA,SAAS,CAAGC,IAAI,CAACC,SAAL,CAAgBL,WAAW,CAACM,SAAb,CAAyB,MAAzB,CAAkC,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAAjD,CAAhB,CACAC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAqCV,WAAW,CAACC,WAAjD,EACAQ,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCV,WAAW,CAACE,OAA7C,EACAO,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAoCP,SAApC,EACAQ,QAAQ,CAACC,IAAT,CAAgB,EAAhB,CACAD,QAAQ,CAACE,QAAT,CAAoB5B,kBAApB,CACH,CAPD,IAOO,IAAIc,GAAJ,CAAS,CACZY,QAAQ,CAACE,QAAT,CAAoB3B,kBAApB,CACA4B,OAAO,CAACC,GAAR,CAAYhB,GAAZ,EACH,CACJ,CAZD,EAaH,C,yDAEiB,CACd,GAAII,CAAAA,SAAS,CAAGC,IAAI,CAACY,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,aAArB,CAAX,CAAhB,CACA,MAAO,IAAIV,CAAAA,IAAJ,GAAWC,OAAX,GAAuBL,SAA9B,CACH,C,uCAEQ,CACLM,YAAY,CAACS,UAAb,CAAwB,cAAxB,EACAT,YAAY,CAACS,UAAb,CAAwB,UAAxB,EACAT,YAAY,CAACS,UAAb,CAAwB,aAAxB,EACAP,QAAQ,CAACE,QAAT,CAAoB3B,kBAApB,CACH,C,+CACY,CACT,GAAIuB,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAJ,CAAsC,CAClC,MAAOjC,CAAAA,SAAS,CAACyB,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAD,CAAhB,CACH,CAFD,IAEO,CACJ,MAAO,EAAP,CACF,CACJ,C,oBAIL,cAAe9B,CAAAA,IAAf","sourcesContent":["/*eslint no-restricted-globals: 0*/\n\nimport auth0 from \"auth0-js\";\nimport jwtDecode from \"jwt-decode\"\n\n//redirectUri:\"http://localhost:3001/callback\" || \n\nconst LOGIN_SUCCESS_PAGE = \"/home\";\nconst LOGIN_FAILURE_PAGE = \"/\";\n\nclass Auth {\n    auth0 = new auth0.WebAuth({\n        domain:\"dev-vny--4ui.us.auth0.com\",\n        clientID:\"HfXSTmsqkuqCz0IGgLF0Nt4PVUsl9fCt\",\n        redirectUri: \"https://minha-carteira.netlify.app/callback\",\n        audience:\"https://dev-vny--4ui.us.auth0.com/userinfo\",\n        responseType: \"token id_token\",\n        scope: \"openid profile\"\n    });\n\n    constructor() {\n        this.login = this.login.bind(this);\n    }\n\n    login(){\n       this.auth0.authorize();\n    }\n\n    handleAuthentication() {\n        this.auth0.parseHash((err, authResults) => {\n            if (authResults && authResults.accessToken && authResults.idToken) {\n                let expiresAt = JSON.stringify((authResults.expiresIn) *100000 + new Date().getTime());\n                localStorage.setItem(\"access_token\", authResults.accessToken);\n                localStorage.setItem(\"id_token\", authResults.idToken);\n                localStorage.setItem(\"experies_at\", expiresAt);\n                location.hash = \"\";\n                location.pathname = LOGIN_SUCCESS_PAGE;\n            } else if (err) {\n                location.pathname = LOGIN_FAILURE_PAGE;\n                console.log(err);\n            }\n        });\n    }\n\n    isAuthenticated() {\n        let expiresAt = JSON.parse(localStorage.getItem(\"experies_at\"));\n        return new Date().getTime() < expiresAt;\n    }\n\n    logout (){\n        localStorage.removeItem(\"access_token\");\n        localStorage.removeItem(\"id_token\");\n        localStorage.removeItem(\"experies_at\");\n        location.pathname = LOGIN_FAILURE_PAGE;\n    }\n    getProfile() {\n        if (localStorage.getItem(\"id_token\")) {\n            return jwtDecode(localStorage.getItem(\"id_token\"));\n        } else {\n           return {};\n        }\n    }\n\n}\n\nexport default Auth"]},"metadata":{},"sourceType":"module"}